version: '3'
services:
    aarc_firedrum_api:
        container_name: aarc_firedrum_api
        build: api
        ports:
            - "9999:${API_INTERNAL_PORT}"
        links:
            - aarc_firedrum_database
        environment:
            - DATABASE=mongodb://aarc_firedrum_database:${DATABASE_INTERNAL_PORT}/auth
            - PORT=${API_INTERNAL_PORT}
    aarc_firedrum_database:
        container_name: aarc_firedrum_db
        image: mongo:3.4.1
        restart: always
        ports:
            - "27227:${DATABASE_INTERNAL_PORT}"
        volumes:
            - "/home/ec2-user/aarc/firedrum_db:/data/db"